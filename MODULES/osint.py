import subprocess
import requests
import os
from sys import argv

# def website_search(url):
#     # Demander à l'utilisateur de saisir le nom de domaine
#     #domain_name = input("Enter a company name (ex:supdevinci.fr) : ")
#
#     # Exécuter la commande theHarvester
#     result = subprocess.check_output(f"theHarvester -d {url} -l 500 -b all", shell=True)
#
#     print("Analysis in progress, please be patient...")
#
#     # Afficher le résultat
#     print(result.decode())

def dirb(urls):
    with open("RESSOURCES/dir.txt", "r") as f:
        wordlist = f.read().splitlines()
    arr=[]
    url=urls
    try:
        if url[:7] != 'http://':
            url="http://"+url
        r=requests.get(url)
        if r.status_code == 200:
            print('Host is up.')
        else:
            print('Host is down.')
            return
        if os.path.exists(os.getcwd()+wordlist):
            fs=open(os.getcwd()+wordlist,"r")
            for i in fs:
                print(url+"/"+i)
                rq=requests.get(url+"/"+i)
                if rq.status_code == 200:
                    print(">OK".rjust(len(url+"/"+i)+5,'-'))
                    arr.append(str(url+"/"+i))
                else:
                    print(">404".rjust(len(url+"/"+i)+5,'-'))
            fs.close()
            print("output".center(100,'-'))
            l=1
            for i in arr:
                print(l, "> ", i)
                l+=1
        else:
            print(wordlist+" don't exists in the directory.")
    except Exception as e:
        print(e)
dirb("supdevinci.fr")